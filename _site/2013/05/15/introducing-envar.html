<!DOCTYPE HTML>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" media="screen, projection" href="/res/style.css" type="text/css">
    <link rel="stylesheet" href="/res/pretify-sunburst.css" type="text/css">
    <title> Envar - A better way to manage evironment variables on windows &mdash;  Echolot-1 </title>
  </head>
  <body>
    <div class="navigation">
      <a href="http://127.0.0.1:4000">Log</a> | 
      <a href="http://127.0.0.1:4000/blog/archive.html">Archive </a> |
      <a href="http://127.0.0.1:4000/downloads/"> Downloads </a> | 
      <a href="http://github.com/echolot-1"> Git </a>
    </div>
    <div class="post">   
 <div class="post-header">
    <table>
      <tr>
        <td style="vertical-align:top;width:28px;"><span class="post-title" style="padding-left:3px"> âœœ </span></td>
        <td> 
          <span class="post-title"> Envar - A better way to manage evironment variables on windows</span>
        </td>
      </tr>
      <tr>
        <td> </td>
        <td>
          <info class="date" style="display:block;" datetime="2013-05-15 00:00:00 -0600">
            Date: May 15, 2013
          </info>
        </td>
      </tr>
    </table>
  </div>
  <h3>What Is It?</h3>

<p>A console application for managing Windows environment variables</p>

<h3>Why Make This?</h3>

<p>If you are a developer and you install lots of tools that you need to have
on your PATH, you probably have faced name conflicts, general clutter or
even ran out of space to keep all your paths. On Linux it&rsquo;s not much of  a
problem since you can neatly keep all your variables in bash scripts.  On
Windows however there isn&rsquo;t any easy way to persistently change them without
relying on awkward user interface or tweaking deeply hidden  registry keys.</p>

<p>Envar provides a simple script syntax for setting, creating and removing
environment variables in either system or user scopes. It can be used
directly from command line or as interpreter for script files. All changes
are made on the registry so they are visible between applications and
persist after reboots.</p>

<p>Envar doesn&rsquo;t enforce any particular work-flow, it just merely provides an
interpreter for a script syntax. How you use it is up to you.</p>

<h3>Compiling</h3>

<p>Requirements: Chicken Scheme MinGW Additional eggs: defstruct, test (only if
you want to run tests)</p>

<p>If you have working chicken scheme under MinGW Msys just run make in bash
shell:</p>

<pre><code>make 
</code></pre>

<p>OR
    make build</p>

<p>This will produce a non portable executable that will depend on  chicken
runtime</p>

<p>To compile a portable executable with chicken runtime included:</p>

<pre><code>make build-portable
</code></pre>

<p>To build and package into archive:</p>

<pre><code>make package
</code></pre>

<p>Other targets:</p>

<pre><code>make clean

make tests
</code></pre>

<h3>Binary Distribution</h3>

<p><a href="https://dl.dropboxusercontent.com/u/23611520/envar-1.0.tar.gz">https://dl.dropboxusercontent.com/u/23611520/envar-1.0.tar.gz</a></p>

<h3>Source Code</h3>

<p><a href="https://github.com/echolot-1/envar">https://github.com/echolot-1/envar</a></p>

<h3>Usage</h3>

<p>Envar is meant to be used from normal Windows cmd shell, not from Linux-like
bash shell that comes with MinGW(some syntax clashes with bash: $() and
&ldquo;;&rdquo;).</p>

<p>Before you do any damage to your environment variables, save them to file:</p>

<pre><code>envar -e my_vars_when_my_computer_was_still_working.env
</code></pre>

<p>To load them back:</p>

<pre><code>envar -i my_vars_when_my_computer_was_still_working.env
</code></pre>

<p>(Note that the author himself is testing this tutorial from the safety of
(virtual machine)</p>

<p>A very common task is to add some directory to PATH variable. Here&rsquo;s how you
would add &ldquo;C:\Java\bin&rdquo; to current user&rsquo;s PATH:</p>

<pre><code>envar PATH : [$(PATH);C:\Java\bin];
</code></pre>

<p>Next, to print a current value of a variable:</p>

<pre><code>envar PATH;
</code></pre>

<p>Your scripts can contain more than one statement. For instance you can
assign and print from the same script:</p>

<pre><code>envar PATH : [$(PATH);C:\Java\bin]; PATH;
</code></pre>

<p>If variable doesn&rsquo;t exists it&rsquo;s automatically created, so don&rsquo;t worry about
causing errors:</p>

<pre><code>envar MYVAR : [TEST VALUE];
</code></pre>

<p>To remove variable from registry, use &ldquo;-&rdquo; operator.</p>

<pre><code>envar MYVAR -;
</code></pre>

<p>You can also create an empty variable, with + operator:</p>

<pre><code>envar MYVAR +;
</code></pre>

<p>As you&rsquo;ve seen previously $() blocks are used to get values of other
variables and insert them into some other values. It&rsquo;s also safe to
reference a variable in the same script, just like  in any other imperative
language:</p>

<pre><code>envar A : [Amethist]; B : [ring]; C : [$(A) $(B)];
</code></pre>

<p>Windows OS distinguishes between two types of environment variables, user
scope and system scope variables. Until now, you&rsquo;ve been working only with
user scope variables. If you wanted to reference system scope, prepend
variable name with &ldquo;@&rdquo;.</p>

<p>This will print value of system variable PATH:</p>

<pre><code>envar @PATH;
</code></pre>

<p>Same convention is used in $() blocks:</p>

<pre><code>envar @PATH : [$(@PATH);C:\Java\bin];
</code></pre>

<p>If you want to set many variables at the same time it might be convinient to
store your scripts in files and then interpret them with -i option:</p>

<pre><code>envar.exe -i myvars.env
</code></pre>

<p>It&rsquo;s possible to dump all current variables into a script, as was shown
before:</p>

<pre><code>envar.exe -e myvars.env
</code></pre>

<p>This will represent each variable as an assignment statement of appropriate
scope, it should  be safe to use as a back-up and restore tool or as basis
for another script.</p>

<p>If file option is absent Envar will work with standard input/output pipe,
which allows for some interesting possibilities (some of which weren&rsquo;t
actually planned by the author and were only later discovered while writing
this tutorial):</p>

<p>Print exported script directly into terminal:</p>

<pre><code>envar.exe -e
</code></pre>

<p>Pipe out to file:</p>

<pre><code>envar.exe -e &gt; myvars.env
</code></pre>

<p>Pipe out and append to file:</p>

<pre><code>envar.exe -e &gt;&gt; myvars.env
</code></pre>

<p>Type script interactively in terminal
(press Ctrl-Z and Enter to print EOF):</p>

<pre><code>envar.exe -i
</code></pre>

<p>Pipe output from other commands:
    echo &ldquo;MYVAR : [VALUE];&rdquo; | envar -i</p>

<p>Pipe in from file:</p>

<pre><code>envar -i &lt; myscript.env
</code></pre>

<p>There&rsquo;s probably more things you can do.</p>

<p>Assignment statement has a little syntax sugar to help you organize complex
values in larger scripts. For instance a typical PATH variable has many
entries and is very convoluted, so it&rsquo;s useful to break-up them into lines:</p>

<pre><code>@Path : [%SystemRoot%\system32;]
        [%SystemRoot%;]
        [%SystemRoot%\System32\Wbem;]
        [C:\chicken\bin;]
        [C:\Program Files\Git\cmd;];
</code></pre>

<p>Lastly, your scripts can contain comments. Anything after # to the end of a
line or string,  which ever happens first is stripped out from a script and
doesn&rsquo;t affect it, in previous example we could comment out some paths for
instance:</p>

<pre><code>@Path : [%SystemRoot%\system32;]
        [%SystemRoot%;]
       #[%SystemRoot%\System32\Wbem;]
        [C:\chicken\bin;] # chicken 4.8.0.3 
       #[C:\Program Files\Git\cmd;];
</code></pre>

<p>Another feature of $() blocks, is that they can be used to execute any any
command in shell and  insert their output into values:</p>

<pre><code>envar A : [Amethist $(shell echo ring)];
</code></pre>

<p>Those are the registry keys affected by Envar, if you need to know:</p>

<pre><code>User variables: 
    HKEY_CURRENT_USER/Environment

System variables: 
    SYSTEM_SCOPE/SYSTEM/CurrentControlSet/Control/Session Manager/Environment
</code></pre>

  <div class="breaker"></div>
  <info class="empty after">
  </info>
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'echolot-1'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>


  </body>
  <script>
  // curry pre < code to be able to get prettified
  // If the first line is
  //   #!-langname\n
  // Then that line is removed from the code and "langname" is given to prettify.
  // If "langname" is "none", that prettify is not applied at all.
  var n,i,L,cn,lang,v = document.getElementsByTagName('pre');
  var m,lang_re = /^#\!-([a-zA-Z0-9_-]+)\n/;
  for (i=0,L=v.length;i<L;++i) {
    n = v.item(i);
    if ((cn = n.firstChild) && cn.nodeName == 'CODE') {
      lang = null;
      if (cn.firstChild.nodeType === Node.TEXT_NODE) {
        m = lang_re.exec(cn.firstChild.nodeValue);
        if (m) {
          lang = m[1].toLowerCase();
          cn.firstChild.nodeValue = cn.firstChild.nodeValue.substr(m[0].length);
          if (lang === 'none') {
            continue;
          }
        }
      }
      n.setAttribute('class', 'prettyprint'+(lang ? ' lang-' + lang : ''));
    }
  }
</script>
<script async src="/res/prettify.js"></script>

 </html>